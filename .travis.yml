before_install:
  - ./install-protobuf.sh

language: java
jdk: oraclejdk7
script:
- mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V -Pproduction
- mvn test -B
deploy:
  provider: s3
  access_key_id:
    secure: r4rfQSCKUhV8SVry9qK6en7aGDyag2whOR7GKFJ75SIfTRZZeUkz11qV27zEGyWke6isZOMsHS7L0A2Szw20+NPolYCl5IcI37uwrwrO2waagcUsgWqkJmZ21EfgF+0myIPmBrWnxae6BOcTuVmTcZycZOMS8lMgmtZxdpEjRu4=
  secret_access_key:
    secure: yJSUKlpnJTAug4OF5dAtCxQjXehG80HyKPwT5TYsm25DjWwpPScMBCDXNZVK7r5BOSnb2z2cpHXwQ25IxALvw3MsNu/okT3EIAEa+cNAuuMtwznNt5najl8BYhZBtmtjD6FDpNTgMnNMLo9QWJZE/fPbVY0J5u0taDKc+OUrjz0=
  bucket: oss.forter.com
  local-dir: "/home/travis/.m2/repository/com/forter/riemann-java-client/"
  upload-dir: repository/com/forter/riemann-java-client
  skip_cleanup: true
  on:
    all_branches: true
    tags: true
